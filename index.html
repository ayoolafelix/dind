<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Font Identification Game</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts used inside the game -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">

  <style>
    button[disabled] { cursor: not-allowed; opacity: 0.95; }
  </style>
</head>

<body
  class="min-h-screen flex items-center justify-center p-4"
  style="
    background-image: url('what the font bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  "
>
  <div id="root" class="w-full max-w-4xl"></div>

  <!-- React + ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Game Code -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    const fonts = [
      { name: 'Helvetica', css: 'Helvetica, Arial, sans-serif' },
      { name: 'Arial', css: 'Arial, sans-serif' },
      { name: 'Times New Roman', css: '"Times New Roman", Times, serif' },
      { name: 'Roboto', css: '"Roboto", sans-serif', cdn: true },
      { name: 'Futura', css: 'Futura, "Trebuchet MS", sans-serif' },
      { name: 'Garamond', css: '"EB Garamond", Garamond, serif', cdn: true },
      { name: 'Montserrat', css: '"Montserrat", sans-serif', cdn: true },
      { name: 'Open Sans', css: '"Open Sans", sans-serif', cdn: true },
      { name: 'Proxima Nova', css: '"Proxima Nova", "Helvetica Neue", sans-serif' },
      { name: 'Calibri', css: 'Calibri, sans-serif' },
      { name: 'Georgia', css: 'Georgia, serif' },
      { name: 'Avenir', css: 'Avenir, "Century Gothic", sans-serif' },
      { name: 'Inter', css: '"Inter", sans-serif', cdn: true },
      { name: 'Lato', css: '"Lato", sans-serif', cdn: true },
      { name: 'Baskerville', css: '"Libre Baskerville", Baskerville, serif', cdn: true },
      { name: 'Source Sans Pro', css: '"Source Sans 3", sans-serif', cdn: true },
      { name: 'Nunito', css: '"Nunito", sans-serif', cdn: true },
      { name: 'SF Pro', css: '"SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif' },
      { name: 'Poppins', css: '"Poppins", sans-serif', cdn: true },
      { name: 'Century Gothic', css: '"Century Gothic", "Apple Gothic", sans-serif' }
    ];

    const ROUNDS = 10;
    const SAMPLE_TEXT = "The quick brown fox jumps over the lazy dog";

    function IconTrophy() { return <span style={{ fontSize: "1.6rem" }}>üèÜ</span>; }
    function IconShare() { return <span style={{ fontSize: "1.2rem" }}>üîó</span>; }
    function IconRefresh() { return <span style={{ fontSize: "1.2rem" }}>üîÑ</span>; }

    function FontGame() {
      const [currentRound, setCurrentRound] = useState(0);
      const [score, setScore] = useState(0);
      const [gameState, setGameState] = useState("playing");
      const [currentFont, setCurrentFont] = useState(null);
      const [options, setOptions] = useState([]);
      const [selectedAnswer, setSelectedAnswer] = useState(null);
      const [feedback, setFeedback] = useState("");
      const [usedFonts, setUsedFonts] = useState([]);
      const [fontsLoaded, setFontsLoaded] = useState(false);

      useEffect(() => {
        setTimeout(() => setFontsLoaded(true), 500);
      }, []);

      useEffect(() => {
        if (gameState === "playing" && fontsLoaded) setupRound();
      }, [currentRound, gameState, fontsLoaded]);

      const setupRound = () => {
        const available = fonts.filter(f => !usedFonts.includes(f.name));
        const correct = available[Math.floor(Math.random() * available.length)];

        const wrong = fonts
          .filter(f => f.name !== correct.name)
          .sort(() => Math.random() - 0.5)
          .slice(0, 3);

        const allOptions = [correct, ...wrong].sort(() => Math.random() - 0.5);

        setCurrentFont(correct);
        setOptions(allOptions);
        setSelectedAnswer(null);
        setFeedback("");
        setUsedFonts([...usedFonts, correct.name]);
      };

      const handleAnswer = (font) => {
        setSelectedAnswer(font.name);

        if (font.name === currentFont.name) {
          setScore(s => s + 1);
          setFeedback("‚úì Correct!");
        } else {
          setFeedback(`‚úó Wrong! It was ${currentFont.name}`);
        }

        setTimeout(() => {
          if (currentRound + 1 < ROUNDS) {
            setCurrentRound(r => r + 1);
          } else {
            setGameState("finished");
          }
        }, 1200);
      };

      const restartGame = () => {
        setCurrentRound(0);
        setScore(0);
        setGameState("playing");
        setUsedFonts([]);
      };

      const shareScore = () => {
        const pct = Math.round((score / ROUNDS) * 100);
        const text = `I scored ${score}/${ROUNDS} (${pct}%) on the Font Identification Game!`;
        const url = window.location.href;

        const twitter = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;

        if (navigator.share) {
          navigator.share({ title: "Font Game", text, url })
                 .catch(() => window.open(twitter));
        } else {
          window.open(twitter);
        }
      };

      if (!fontsLoaded) {
        return (
          <div className="bg-white rounded-2xl shadow-2xl p-8 text-center">
            <div className="animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"></div>
            <p className="text-gray-600 font-semibold">Loading fonts...</p>
          </div>
        );
      }

      if (gameState === "finished") {
        const pct = Math.round((score / ROUNDS) * 100);

        return (
          <div className="min-h-screen flex items-center justify-center p-4">
            <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
              <div className="w-20 h-20 mx-auto mb-4 flex items-center justify-center"><IconTrophy /></div>

              <h1 className="text-3xl font-bold mb-4 text-gray-800">Game Over!</h1>

              <p className="text-6xl font-bold text-blue-600 mb-2">{score}/{ROUNDS}</p>
              <p className="text-xl text-gray-600">{pct}% Correct</p>

              <div className="space-y-3 mt-6">
                <button
                  onClick={shareScore}
                  className="w-full bg-[#1E68C7] hover:bg-[#1556A5] text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2"
                >
                  <IconShare /> Share Score
                </button>

                <button
                  onClick={restartGame}
                  className="w-full bg-[#1E68C7] hover:bg-[#1556A5] text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2"
                >
                  <IconRefresh /> Play Again
                </button>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full">

            <div className="flex justify-between mb-6 text-gray-600 font-semibold">
              <span>Round {currentRound + 1}/{ROUNDS}</span>
              <span>Score: {score}/{currentRound}</span>
            </div>

            <h2 className="text-2xl font-bold mb-6 text-center text-gray-800">What font is this?</h2>

            <div className="mb-8 p-6 bg-gray-50 rounded-xl border-2 border-gray-200">
              <p style={{ fontFamily: currentFont?.css }} className="text-4xl text-center leading-relaxed">
                {SAMPLE_TEXT}
              </p>
            </div>

            {feedback && (
              <div className={`mb-4 p-3 text-center font-semibold rounded-lg ${
                feedback.includes("‚úì")
                  ? "bg-green-100 text-green-700"
                  : "bg-red-100 text-red-700"
              }`}>
                {feedback}
              </div>
            )}

            <div className="grid grid-cols-2 gap-4">
              {options.map(font => (
                <button
                  key={font.name}
                  onClick={() => handleAnswer(font)}
                  disabled={selectedAnswer !== null}
                  className={`p-4 rounded-lg font-semibold text-lg transition ${
                    selectedAnswer === null
                      ? "bg-[#1E68C7] hover:bg-[#1556A5] text-white"
                      : selectedAnswer === font.name
                        ? (font.name === currentFont.name ? "bg-green-500 text-white" : "bg-red-500 text-white")
                        : font.name === currentFont.name
                          ? "bg-green-500 text-white"
                          : "bg-gray-300 text-gray-500"
                  }`}
                >
                  {font.name}
                </button>
              ))}
            </div>

          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<FontGame />);
  </script>
</body>
</html>
